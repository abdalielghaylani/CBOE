<div class="viewcontainer" (window:resize)="onResize($event)" [hidden]="currentIndex!=0">
  <div *ngIf="submissionTemplatesEnabled" class="btn-group btn-group-xs pull-right" role="group" aria-label="" style="margin:5px">
    <button type="button" class="btn btn-default border-2 status background-blue border-blue">
      <i class="fa-undo white" aria-hidden="true"></i>
    </button>
    <button type="button" class="btn btn-default border-2 status border-blue blue dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
      aria-expanded="false">Templates <span class="caret"></span></button>
    <ul class="dropdown-menu">
      <li><button type="button" class="btn" (click)="showSaveTemplate()">Save as Template</button></li>
      <li><button type="button" class="btn" (click)="showTemplates()">Load from Templates</button></li>
    </ul>
  </div>
  <command-button *ngIf="clearButtonEnabled" testid="clear-record-details-button" (onClick)="clear()" iconName="eraser" title="Clear"></command-button>
  <command-button *ngIf="deleteButtonEnabled" testid="delete-record-details-button" (onClick)="delete()" iconName="trash" title="Delete"></command-button>
  <command-button *ngIf="editButtonEnabled" testid="edit-record-details-button" (onClick)="edit()" iconName="edit" title="Edit"></command-button>
  <command-button *ngIf="editMode &amp;&amp; !isNewRecord" testid="cancel-record-details-button" (onClick)="cancel()" iconName="undo"
    title="Cancel"></command-button>
  <command-button *ngIf="saveButtonEnabled" testid="save-record-details-button" (onClick)="save()" iconName="floppy-o" title="Save"></command-button>
  <command-button *ngIf="registerButtonEnabled" testid="register-record-details-button" (onClick)="register()" iconName="registered"
    title="Register"></command-button>
  <command-button *ngIf="approveButtonEnabled" testid="approve-temp-record-button" (onClick)="approve()" iconName="thumbs-o-up"
    title="Approve"></command-button>
  <command-button *ngIf="cancelApprovalButtonEnabled" testid="cancel-temp-record-approval-button" (onClick)="cancelApproval()"
    iconName="thumbs-o-down" title="Cancel Approval"></command-button>
  <command-button *ngIf="duplicateResolution.enabled" testid="cancel-duplicate-record-button" iconName="window-close" title="Cancel" (onClick)="cancelDuplicateResolution()"></command-button>
  <command-button *ngIf="duplicateResolution.enabled" testid="use-structure-record-button" iconName="code-fork" title="Use Structure"></command-button>
  <command-button *ngIf="duplicateResolution.enabled" testid="use-component-record-button" iconName="calendar-plus-o" title="Use Component"></command-button>
  <command-button *ngIf="duplicateResolution.enabled" testid="create-duplicate-record-button" iconName="clone" title="Duplicate" (onClick)="createDuplicateRecord()"></command-button>
  <command-button *ngIf="duplicateResolution.enabled" testid="add-batch-record-button" iconName="object-ungroup" title="Add Batch"></command-button>
  <reg-header testid="configuration-heading" id="qa-configuration-heading">
    {{title}}
  </reg-header>
  <div *ngIf="duplicateResolution.enabled" class="text-center alert alert-info alert-dismissible fade in" role="alert">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
    <p><i class="fa fa-info-circle" aria-hidden="true"></i>&nbsp;The component you are trying to register already exists. Review
      the list of conflicts and choose a duplicate action.</p>
  </div>
  <div class="row">
    <div class="btn-group pull-right" *ngIf="duplicateResolution.enabled">
      <div [ngClass]="duplicateResolution.index > 0? 'btn blue text-right' :'btn disabled text-right'">
        Previous <i (click)="navigateToDuplicateEntry('previous')" class="fa fa-lg fa-arrow-left fa-border" aria-hidden="true"
          title="Next"></i></div>
      <div [ngClass]="duplicateResolution.index < duplicateResolution.duplicateRecords.length - 1 ? 'btn blue text-left' :'btn disabled text-left'">
        <i (click)="navigateToDuplicateEntry('next')" class="fa fa-lg fa-arrow-right fa-border" aria-hidden="true" title="Previous"></i>        Next
      </div>
    </div>
    <div class="count blue pull-left" *ngIf="duplicateResolution.enabled" style="padding-left: 15px;">
      <div class="count-type">Resolving Component</div>
      <div class="count-type-amount border-blue round border-2 padding-xs">
        {{ duplicateResolution.duplicateRecords.length }}
        <i class="fa fa-book" aria-hidden="true"></i>
      </div>
    </div>
  </div>
  <dx-scroll-view id="detailScrollView" [height]="parentHeight" scrollByContent="true" scrollByThumb="true" showScrollbar="true">
    <form class="form-inline" role="form" ng-submit="search(query)">
      <reg-form-group-view [formGroupData]="formGroup" [activated]="currentIndex===0" [editMode]="editMode" [displayMode]="displayMode"></reg-form-group-view>
      <!--<div class="panel-group" id="accordion">
        <div class="panel panel-default">
          <div class="panel-heading" style='border-left: 4px solid tan;' (click)="togglePanel($event)">
            <a class="list-header tan" data-toggle="collapse" href="#registryPanel">Registry Information</a>
          </div>
          <div id="registryPanel" class="panel-collapse collapse in">
            <div class="p2">
              <reg-form-view id="registryForm" [formData]="regRecordVM" [colCount]="2" [items]="regRecordVM.columns" [editMode]="editMode">
              </reg-form-view>
            </div>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading" style='border-left: 4px solid tan;' (click)="togglePanel($event)">
            <a class="list-header tan" data-toggle="collapse" href="#structurePanel">Structure Information</a>
          </div>
          <div id="structurePanel" class="panel-collapse collapse in">
            <div class="p2">
              <div style="width:100%;height:100%;" resize>
                <chemdraw-web id="cdw-detail" [activated]="true" [editMode]="editMode"></chemdraw-web>
              </div>
            </div>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading" style='border-left: 4px solid tan;' (click)="togglePanel($event)">
            <a class="list-header tan" data-toggle="collapse" href="#componentPanel">Component Information </a>
          </div>
          <div id="componentPanel" class="panel-collapse collapse in">
            <div class="p2">
              <reg-form-view id="componentForm" [formData]="regRecordVM.componentList[0]" [items]="regRecordVM.componentList[0].columns"
                [editMode]="editMode">
              </reg-form-view>
            </div>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading" style='border-left: 4px solid tan;' (click)="togglePanel($event)">
            <a class="list-header tan" data-toggle="collapse" href="#batchPanel">Batch Information </a>
          </div>
          <div id="batchPanel" class="panel-collapse collapse in">
            <div class="p2">
              <reg-form-view id="batchForm" [formData]="regRecordVM.batchList[0]" [items]="regRecordVM.batchList[0].columns" [editMode]="editMode">
              </reg-form-view>
            </div>
          </div>
        </div>
      </div>-->
    </form>
  </dx-scroll-view>
  <dx-popup [width]="400" [height]="220" [showTitle]="true" title="Save as Template" [dragEnabled]="false" [closeOnOutsideClick]="true"
    [(visible)]="saveTemplatePopupVisible">
    <div *dxTemplate="let data of 'content'">
      <dx-form id="saveTemplateForm" labelLocation="left" minColWidth="400" [colCount]="1" [items]="saveTemplateItems" [formData]="saveTemplateData"
        (onInitialized)='onSaveTemplateFormInit($event)'>
      </dx-form>
      <div style="margin-top: 15px">
        <button class="mr1 btn btn-primary" (click)="saveTemplate()">Save</button>
        <button class="mr1 btn btn-primary" (click)="cancelSaveTemplate()">Cancel</button>
      </div>
    </div>
  </dx-popup>
</div>
<div class="viewcontainer" [hidden]="currentIndex!==1">
  <reg-templates (onClose)="showDetails($event)"></reg-templates>
</div>