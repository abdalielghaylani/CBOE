<command-button testid="close-query-management-button" (onClick)="cancel($event)" iconName="close" title="Close"></command-button>
<reg-page-header testid="configuration-heading" id="qa-configuration-heading">
  Query Management
</reg-page-header>
<dx-data-grid id="grdSearchQuery" [height]="parentHeight" [columns]=hitlistVM.gridColumns [attr.data-target]=hitlistVM [masterDetail]="{ enabled: false, template: 'detail' }"
  [dataSource]=records rowAlternationEnabled=true (onEditorPreparing)='onEditorPreparing($event)' (onRowRemoving)='onRowRemoving($event)'
  (onCellPrepared)='onCellPrepared($event)' (onContentReady)='onContentReady($event)' (onRowUpdating)='onRowUpdating($event)'>
  <dxo-editing mode="row" [allowUpdating]="true" [allowDeleting]="true" [allowAdding]="false" [texts]="{
      confirmDeleteMessage: 'Are you sure you want to delete this hitlist?',
      confirmDeleteTitle: 'Remove Hitlist'
  }"></dxo-editing>
  <dxo-scrolling mode="infinite"></dxo-scrolling>
  <dxo-filter-row [visible]="true"></dxo-filter-row>
  <dxo-search-panel [visible]="true" placeholder="Search..."></dxo-search-panel>
  <div *dxTemplate="let data of 'detail'">
    <div class="panel center-block panel-default" id="restore-hitlist" style="width:70%">
      <div class="panel-heading">
        <h3 class="panel-title">Please choose a restore type below </h3>
      </div>
      <div class="panel-body">
        <dx-radio-group valueExpr="key" displayExpr="value" [dataSource]="hitlistVM.getRestoreDataSource()" [(value)]="hitlistVM.advancedRestoreType">
        </dx-radio-group>
        <div style="margin-top: 25px">
          <button class="mr1 btn btn-default" data-dismiss="modal" (click)="advancedRestorePopup(data)">Restore</button>
          <a class="mr1 btn btn-default" (click)="hideRestore(data)">Cancel</a>
        </div>
      </div>
    </div>
  </div>
  <div *dxTemplate="let d of 'restoreCellTemplate'">
    <a [ngClass]="(d.data.hitlistId !== hitlistId)?'fa fa fa-check grid-icon':'fa fa fa-check grid-icon-disabled'" aria-hidden="true" title='Restore Hitlist' data-dismiss="modal" (click)="restoreSelectedHitlist(d.data)"></a>&nbsp;
    <a class="fa fa-refresh grid-icon" aria-hidden="true" title='Perform Query' (click)="refreshSelectedHitlist(d.data)"></a>&nbsp;
    <a class="fa fa-table grid-icon" aria-hidden="true" title='Restore Query To Form'></a>&nbsp;
    <a [ngClass]="(hitlistId &amp;&amp; hitlistId > 0 &amp;&amp; d.data.hitlistId !== hitlistId)?'fa fa fa-filter grid-icon':'fa fa fa-filter grid-icon-disabled'" aria-hidden="true" title='Advanced' (click)="showRestore(d)"></a>
  </div>
  <div *dxTemplate="let d of 'saveCellTemplate'">
    <a *ngIf="d.data.hitlistType === 'TEMP'" class="fa fa fa-floppy-o grid-icon" aria-hidden="true" title='Add to saved hitlist' (click)="moveToSaveHitlist(d.data)"></a>&nbsp; {{d.value}}
  </div>
</dx-data-grid>