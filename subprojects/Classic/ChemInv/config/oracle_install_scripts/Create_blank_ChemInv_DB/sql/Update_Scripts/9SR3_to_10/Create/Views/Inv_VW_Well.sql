CREATE OR REPLACE VIEW INV_VW_WELL(
	WELL_ID,
	WELL_FORMAT_ID_FK,
	PLATE_ID_FK,
	COMPOUND_ID_FK,
	REG_ID_FK,
	BATCH_NUMBER_FK,
	MOL_ID,
	CAS,
	ACX_ID,
	SUBSTANCE_NAME,
	QTY_INITIAL,
	QTY_REMAINING,
	QTY_UNIT_FK,
	WEIGHT,
	WEIGHT_UNIT_FK,
	SOLVENT,
	CONCENTRATION,
	CONC_UNIT_FK,
	MOLAR_CONC,
	GRID_POSITION_ID,
	GRID_FORMAT_ID_FK,
	ROW_INDEX,
	COL_INDEX,
	ROW_NAME,
	COL_NAME,
	NAME,
	SORT_ORDER,
	WELL_FIELD_1, WELL_FIELD_2, WELL_FIELD_3, 
	WELL_FIELD_4, WELL_FIELD_5, WELL_DATE_1, WELL_DATE_2
) AS SELECT
	INV_WELLS.WELL_ID,
	INV_WELLS.WELL_FORMAT_ID_FK,
	INV_WELLS.PLATE_ID_FK,
	decode(inv_compounds.reg_id_fk,null,inv_compounds.compound_id,null) as compound_id_fk,
  inv_compounds.reg_id_fk,
  inv_compounds.batch_number_fk,
  inv_compounds.mol_id,
  inv_compounds.cas,
  inv_compounds.acx_id,
  inv_compounds.substance_name,
	INV_WELLS.QTY_INITIAL,
	INV_WELLS.QTY_REMAINING,
	INV_WELLS.QTY_UNIT_FK,
	INV_WELLS.WEIGHT,
	INV_WELLS.WEIGHT_UNIT_FK,
	INV_SOLVENTS.SOLVENT_NAME,
	INV_WELLS.CONCENTRATION,
	INV_WELLS.CONC_UNIT_FK,
	INV_WELLS.MOLAR_CONC,
	INV_GRID_POSITION.GRID_POSITION_ID,
	INV_GRID_POSITION.GRID_FORMAT_ID_FK,
	INV_GRID_POSITION.ROW_INDEX,
	INV_GRID_POSITION.COL_INDEX,
	INV_GRID_POSITION.ROW_NAME,
	INV_GRID_POSITION.COL_NAME,
	INV_GRID_POSITION.NAME,
	INV_GRID_POSITION.SORT_ORDER,
	INV_WELLS.FIELD_1,
	INV_WELLS.FIELD_2,
	INV_WELLS.FIELD_3,
	INV_WELLS.FIELD_4,
	INV_WELLS.FIELD_5,
	INV_WELLS.DATE_1,
	INV_WELLS.DATE_2
  FROM INV_WELLS, INV_GRID_POSITION, INV_SOLVENTS, 
  (SELECT min(well_compound_id) as well_compound_id, well_id_fk FROM INV_WELL_COMPOUNDS GROUP BY well_id_fk) FIRST_COMPOUND_ROW,
  INV_COMPOUNDS, INV_WELL_COMPOUNDS
  WHERE GRID_POSITION_ID_FK = GRID_POSITION_ID
		AND INV_WELLS.SOLVENT_ID_FK = INV_SOLVENTS.SOLVENT_ID(+)
    AND INV_WELLS.WELL_ID = FIRST_COMPOUND_ROW.well_id_fk(+)
    AND FIRST_COMPOUND_ROW.WELL_COMPOUND_ID = INV_WELL_COMPOUNDS.WELL_COMPOUND_ID(+)
    AND INV_WELL_COMPOUNDS.COMPOUND_ID_FK = INV_COMPOUNDS.COMPOUND_ID(+)
  ORDER BY INV_GRID_POSITION.SORT_ORDER;
