CREATE OR REPLACE PACKAGE BODY CTX_CHEMINV_MGR AS
	PROCEDURE SETROLEIDS IS
		L_ROLEIDS VARCHAR2(200) := '';
	BEGIN
		FOR ROLE_ROW IN (SELECT DISTINCT ROLE_ID
											 FROM &&securitySchemaName..SECURITY_ROLES   S,
														&&securitySchemaName..PRIVILEGE_TABLES P
											WHERE S.PRIVILEGE_TABLE_INT_ID = P.PRIVILEGE_TABLE_ID
												AND P.PRIVILEGE_TABLE_NAME LIKE
														NVL('CHEMINV_PRIVILEGES', '%')
												AND ROLE_NAME IN
														(SELECT GRANTED_ROLE AS ROLE_NAME
															 FROM DBA_ROLE_PRIVS
															WHERE UPPER(GRANTEE) =
																		UPPER(SYS_CONTEXT('USERENV',
																											'SESSION_USER')))) LOOP
			L_ROLEIDS := L_ROLEIDS || ROLE_ROW.ROLE_ID || ',';
		END LOOP;
		L_ROLEIDS := TRIM(',' FROM L_ROLEIDS);
	
		DBMS_SESSION.SET_CONTEXT('CTX_Cheminv', 'roleIDs', L_ROLEIDS);
	
	END SETROLEIDS;

END CTX_CHEMINV_MGR;
/
