CREATE OR REPLACE VIEW INV_VW_WELL(
	WELL_ID,
	WELL_FORMAT_ID_FK,
	PLATE_ID_FK,
	COMPOUND_ID_FK,
	REG_ID_FK,
	BATCH_NUMBER_FK,
	MOL_ID,
	CAS,
	ACX_ID,
	SUBSTANCE_NAME,
	QTY_INITIAL,
	QTY_REMAINING,
	QTY_UNIT_FK,
	WEIGHT,
	WEIGHT_UNIT_FK,
	SOLVENT,
	CONCENTRATION,
	CONC_UNIT_FK,
	GRID_POSITION_ID,
	GRID_FORMAT_ID_FK,
	ROW_INDEX,
	COL_INDEX,
	ROW_NAME,
	COL_NAME,
	NAME,
	SORT_ORDER
) AS SELECT
	INV_WELLS.WELL_ID,
	INV_WELLS.WELL_FORMAT_ID_FK,
	INV_WELLS.PLATE_ID_FK,
	--INV_WELL_COMPOUNDS.COMPOUND_ID_FK,
	--INV_WELL_COMPOUNDS.REG_ID_FK,
	--INV_WELL_COMPOUNDS.BATCH_NUMBER_FK,
	--INV_COMPOUNDS.MOL_ID,
	--INV_COMPOUNDS.CAS,
	--INV_COMPOUNDS.ACX_ID,
	--INV_COMPOUNDS.SUBSTANCE_NAME,
  (SELECT compound_id_fk FROM inv_well_compounds WHERE well_compound_id = FIRST_COMPOUND_ROW.well_compound_id) AS compound_id_fk,
  (SELECT reg_id_fk FROM inv_well_compounds WHERE well_compound_id = FIRST_COMPOUND_ROW.well_compound_id) AS reg_id_fk,
  (SELECT batch_number_fk FROM inv_well_compounds WHERE well_compound_id = FIRST_COMPOUND_ROW.well_compound_id) AS batch_number_fk,
  (SELECT mol_id FROM inv_compounds WHERE compound_id in (SELECT compound_id_fk FROM inv_well_compounds WHERE well_compound_id = FIRST_COMPOUND_ROW.well_compound_id)) AS mol_id,
  (SELECT cas FROM inv_compounds WHERE compound_id in (SELECT compound_id_fk FROM inv_well_compounds WHERE well_compound_id = FIRST_COMPOUND_ROW.well_compound_id)) AS cas,
  (SELECT acx_id FROM inv_compounds WHERE compound_id in (SELECT compound_id_fk FROM inv_well_compounds WHERE well_compound_id = FIRST_COMPOUND_ROW.well_compound_id)) AS acx_id,
  (SELECT substance_name FROM inv_compounds WHERE compound_id in (SELECT compound_id_fk FROM inv_well_compounds WHERE well_compound_id = FIRST_COMPOUND_ROW.well_compound_id)) AS substance_name,
	INV_WELLS.QTY_INITIAL,
	INV_WELLS.QTY_REMAINING,
	INV_WELLS.QTY_UNIT_FK,
	INV_WELLS.WEIGHT,
	INV_WELLS.WEIGHT_UNIT_FK,
	INV_SOLVENTS.SOLVENT_NAME,
	INV_WELLS.CONCENTRATION,
	INV_WELLS.CONC_UNIT_FK,
	INV_GRID_POSITION.GRID_POSITION_ID,
	INV_GRID_POSITION.GRID_FORMAT_ID_FK,
	INV_GRID_POSITION.ROW_INDEX,
	INV_GRID_POSITION.COL_INDEX,
	INV_GRID_POSITION.ROW_NAME,
	INV_GRID_POSITION.COL_NAME,
	INV_GRID_POSITION.NAME,
	INV_GRID_POSITION.SORT_ORDER
  FROM INV_WELLS, INV_GRID_POSITION, INV_SOLVENTS, (SELECT min(well_compound_id) as well_compound_id, well_id_fk FROM INV_WELL_COMPOUNDS GROUP BY well_id_fk) FIRST_COMPOUND_ROW
  WHERE GRID_POSITION_ID_FK = GRID_POSITION_ID
		AND INV_WELLS.SOLVENT_ID_FK = INV_SOLVENTS.SOLVENT_ID(+)
    AND INV_WELLS.WELL_ID = FIRST_COMPOUND_ROW.well_id_fk(+)
  ORDER BY INV_GRID_POSITION.SORT_ORDER;

