<div class="viewcontainer" (window:resize)="onResize($event)" [hidden]="!popup.visible">
  <command-button testid="close-button" (onClick)="cancel()" iconName="close" title="Close"></command-button>
  <command-button *ngIf="isEditable" testid="save-button" (onClick)="saveXml($event)"  iconName="save" title="Save Xml"></command-button>
  <command-button *ngIf="isEditable" testid="copy-button" (onClick)="copyToClipboard($event)"  iconName="copy" title="Copy to Clipboard"></command-button>
  <command-button *ngIf="isEditable" testid="paste-button" (onClick)="pasteFromClipboard($event)"  iconName="paste" title="Paste From Clipboard"></command-button>
  <command-button *ngIf="isEditable" testid="view-xml" (onClick)="editXML(false)"  iconName="eye" title="Swithc to View Mode"></command-button>
  <command-button *ngIf="!isEditable" testid="edit-xml" (onClick)="editXML(true)"  iconName="edit" title="Edit XML"></command-button>
  <reg-header testid="configuration-heading" id="qa-configuration-heading">
    {{popup.title}} - XML
  </reg-header>
  <dx-scroll-view *ngIf="!isEditable" id="detailScrollView" [height]="gridHeight" scrollByContent="true" scrollByThumb="true" showScrollbar="onHover" >
      <reg-xml-viewer [xml]="popup.data"></reg-xml-viewer>
  </dx-scroll-view>
  <dx-text-area *ngIf="isEditable" [height]="gridHeight" [(value)]="popup.data"></dx-text-area>
</div>
<div class="viewcontainer" (window:resize)="onResize($event)" [hidden]="popup.visible">
  <reg-settings-page-header>Edit Form XML</reg-settings-page-header>
  <dx-data-grid [dataSource]="dataSource" [paging]='{pageSize: 10}' [pager]='{ showPageSizeSelector: true, allowedPageSizes: [5, 10, 20], showInfo: true }'
    [searchPanel]='{ visible: true }' [filterRow]='{ visible: true }' [height]="gridHeight" rowAlternationEnabled="true" (onContentReady)='onInitialized($event)'
    (onEditingStart)="onEditingStart($event)" (onCellPrepared)='onCellPrepared($event)'>
    <dxo-editing mode="form" [allowUpdating]="true" [allowDeleting]="false" [allowAdding]="false"></dxo-editing>
    <dxo-scrolling mode="infinite"></dxo-scrolling>
    <dxi-column caption="Name" [width]="230" [fixed]="true" dataField="name" dataType="string"></dxi-column>
    <dxi-column dataField="data" [allowSorting]="false" cellTemplate="xmlCellTemplate"></dxi-column>
    <div *dxTemplate="let data of 'xmlCellTemplate'">
      <code [title]="data.value">
      {{data.value}}
      </code>
    </div>
  </dx-data-grid>
</div>
<dx-load-panel [position]="{at: 'center'}" [(visible)]="loadingVisible" [showIndicator]="true" [showPane]="true" shadingColor="rgba(128, 128, 128, .5)" [shading]="true" [closeOnOutsideClick]="false"></dx-load-panel>
