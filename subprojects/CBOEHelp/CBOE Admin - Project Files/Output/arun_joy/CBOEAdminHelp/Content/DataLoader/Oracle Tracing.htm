<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:tocPath="Registration|Data Loader" MadCap:InPreviewMode="false" MadCap:PreloadImages="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="WebHelp" lang="en-us" xml:lang="en-us" MadCap:PathToHelpSystem="../../" MadCap:HelpSystemFileName="ChemBioOffice Enterprise Administrator Guide.xml" MadCap:SearchType="Stem">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Oracle Tracing</title>
        <link href="../SkinSupport/Slideshow.css" rel="stylesheet" />
        <link href="../SkinSupport/MadCap.css" rel="stylesheet" />
        <link href="../Resources/Stylesheets/help_ie.css" rel="stylesheet" />
        <script src="../SkinSupport/jquery.min.js" type="text/javascript">
        </script>
        <script src="../SkinSupport/MadCapAll.js" type="text/javascript">
        </script>
        <script src="../SkinSupport/MadCapTopicAll.js" type="text/javascript">
        </script>
    </head>
    <body>
        <div class="navigation">
            <table style="WIDTH: 100%;" width="100%">
                <tr valign="bottom">
                    <td width="95%" align="left" valign="bottom" style="font-family: Arial;font-size: 12pt;"><em style="font-style: italic;"></em>DataLoader</td>
                </tr>
                <tr align="left" valign="top">
                    <td style="font-family: Arial;font-size: 12pt;font-weight: bold;">
                        <hr width="100%" size="0" align="center" />Administrator<strong>'s Guide</strong></td>
                </tr>
            </table>
        </div>
        <h1>Oracle Tracing</h1>
        <p>The best way to reach maximum performance for a bulk loading operation is to enable and analyze a database level trace.  Such a trace contains detailed information of which database task are responsible for low load performance. 
</p>
        <p>CBOE applications do not do all of their work within a single Oracle session or under the credentials of a single database user.  They use connection pooling and proxy connections that can make it difficult to trace the Oracle SQL executed on behalf of the application.  The goal is trace all activity in the database that is a result of work done by a CBOE application, regardless of the connected user or Oracle session.  The best way to accomplish this is to use the DBMS_MONITOR package which allows tracing based on the client id.  The CBOE applications set the client id to username of the authenticated COE user.  It is therefore possible to trace all SQL associated with a particular end-user session.  However, when tracing, it is important to choose a user that will not be in use by anyone else.  For example, you can even create a user with appropriate application privileges to be used for tracing purposes.
</p>
        <p>Once the application to be traced is running (ie. COEDataLoader) you should be able to see the client id corresponding to your logged in user by executing:
</p>
        <p>Connect system/manager@&amp;&amp;YourTNSName
<br />select s.username,s.client_identifier
</p>
        <blockquote>
            <p>from v$session s,v$process p
                    <br />where s.paddr=p.addr
                    <br />and client_identifier is not null;
                    </p>
        </blockquote>
        <p>Next you can enable tracing for that client id by executing:
</p>
        <p>-- Substitute T5_85 with the correct user name
<br />exec dbms_monitor.client_id_trace_enable('T5_85',true,false);  
</p>
        <p>Note:  Depending on your database, the above statement may need System or Sys privileges to be executed.
</p>
        <p>To stop the trace use:
</p>
        <p>exec dbms_monitor.client_id_trace_disable('T5_85');
</p>
        <p>The trace file will be found in the user_dump_dest for your database.  You can execute the following program and look at the output to see the actual file location.
</p>
        <p>Declare
</p>
        <blockquote>
            <p>   paramname varchar2(256);
<br />    integerval binary_integer;
<br />    stringval varchar2(256);
<br />    paramtype binary_integer;
</p>
        </blockquote>
        <p>Begin
     <br />paramtype:=dbms_utility.get_parameter_value('user_dump_dest',integerval,stringval);
     <br />if paramtype=1 then
<br />      dbms_output.put_line(stringval);
     <br />else
<br />        dbms_output.put_line(integerval);
<br />    end if;
<br />end;
<br />/
</p>
        <p>Finally, the resulting .trc file needs to be processed into a readable report by executing:
</p>
        <p>Tkprof.exe &lt;name of your trc file&gt;  report.txt  sort=exeela
</p>
        <p>Please submit both the report.txt and the raw trace file for analysis by PerkinElmer support personnel.
</p>
        <p><b style="text-decoration: underline;">Related Topics</b>
            <br /><a href="Data Loader Introduction.htm">Data Loader</a> <![CDATA[
]]></p>
        <hr style="font-family: Arial;font-size: 10pt;" />
        <p style="text-align: right;"><b><span style="color: #646464;">PerkinElmer Inc.</span> | <span style="color: #0055a6;">For the Better</span></b>
            <br /><span style="color: #00a1de;font-weight: bold;"><span style="font-size: 9pt;">HUMAN HEALTH </span></span><b>| </b><span style="color: #6cb442;font-weight: bold;"><span style="font-size: 9pt;">ENVIRONMENTAL HEALTH</span></span>
            <br />940 Winter Street | Waltham, MA 02451<br /><a href="http://www.perkinelmer.com/informatics/support/" target="_blank">www.perkinelmer.com/informatics/support</a></p>
        <script type="text/javascript" src="../SkinSupport/MadCapBodyEnd.js">
        </script>
    </body>
</html>